export interface Product {
  id: number
  trade_name: string
  scientific_name: string
  manufacturer: string
  dosage_form: string
  strength: string
  price: number
  category: string
}

export interface Formulation {
  id: number
  name: string
  active_ingredients: string
  form: string
  instructions: string
  shelf_life: string
  preparation_method: string
}

export interface PharmDataset {
  products: Product[]
  formulations: Formulation[]
}

// بيانات الأدوية التجارية
const tradeNames = [
  "بانادول",
  "فولتارين",
  "أوجمنتين",
  "زيرتك",
  "نيكسيوم",
  "ليبيتور",
  "كريستور",
  "فينتولين",
  "سيمبيكورت",
  "نورفاسك",
  "كونكور",
  "جلوكوفاج",
  "أماريل",
  "لانتوس",
  "زولوفت",
  "بروزاك",
  "زاناكس",
  "أمبين",
  "فياجرا",
  "سياليس",
  "نولفادكس",
  "تاموكسيفين",
  "هيرسبتين",
  "أفاستين",
  "كيترودا",
  "ريميكاد",
  "هيوميرا",
  "إنبريل",
  "كوسنتيكس",
  "دوبيكسنت",
  "أوزمبيك",
  "تروليسيتي",
  "جاردينس",
  "فورسيجا",
  "إليكويس",
  "زاريلتو",
  "برادكسا",
  "لوفينوكس",
  "أسبرين",
]

const scientificNames = [
  "باراسيتامول",
  "ديكلوفيناك",
  "أموكسيسيلين/كلافولانيك",
  "سيتريزين",
  "إيزوميبرازول",
  "أتورفاستاتين",
  "روزوفاستاتين",
  "سالبوتامول",
  "بوديسونيد/فورموتيرول",
  "أملوديبين",
  "بيسوبرولول",
  "ميتفورمين",
  "جليميبيريد",
  "إنسولين جلارجين",
  "سيرترالين",
  "فلوكستين",
  "ألبرازولام",
  "زولبيديم",
  "سيلدينافيل",
  "تادالافيل",
  "تاموكسيفين",
  "تراستوزوماب",
  "بيفاسيزوماب",
  "بيمبروليزوماب",
  "إنفليكسيماب",
  "أداليموماب",
  "إيتانرسيبت",
  "سيكيوكينوماب",
  "دوبيلوماب",
  "سيماجلوتيد",
  "دولاجلوتيد",
  "إمباجليفلوزين",
  "داباجليفلوزين",
  "أبيكسابان",
  "ريفاروكسابان",
  "دابيجاتران",
  "إينوكسابارين",
  "حمض الأسيتيل ساليسيليك",
]

const manufacturers = [
  "فايزر",
  "نوفارتس",
  "روش",
  "جونسون آند جونسون",
  "ميرك",
  "أسترازينيكا",
  "سانوفي",
  "جلاكسو سميث كلاين",
  "أبفي",
  "بريستول مايرز سكويب",
  "إيلي ليلي",
  "أمجن",
  "جيلياد",
  "بيوجين",
  "ريجينيرون",
  "فيرتكس",
  "ألكسيون",
  "بايونتيك",
  "موديرنا",
  "نوفو نورديسك",
  "تاكيدا",
  "أستيلاس",
  "دايتشي سانكيو",
  "الحكمة",
  "جلفار",
  "سبيماكو",
  "تبوك للصناعات الدوائية",
  "الدوائية",
]

const dosageForms = [
  "أقراص",
  "كبسولات",
  "شراب",
  "حقن",
  "تحاميل",
  "كريم",
  "جل",
  "مرهم",
  "قطرات عينية",
  "بخاخ أنفي",
  "بخاخ فموي",
  "لصقات جلدية",
  "أقراص فوارة",
  "محلول فموي",
  "معلق فموي",
  "مسحوق للحل",
  "أقراص تحت اللسان",
]

const categories = [
  "مسكنات",
  "مضادات حيوية",
  "مضادات الهيستامين",
  "أدوية الجهاز الهضمي",
  "أدوية القلب والأوعية",
  "أدوية السكري",
  "مضادات الاكتئاب",
  "مضادات القلق",
  "منومات",
  "أدوية الضعف الجنسي",
  "أدوية الأورام",
  "أدوية المناعة",
  "أدوية الجهاز التنفسي",
  "مضادات التخثر",
  "أدوية الكوليسترول",
]

// بيانات التركيبات الصيدلانية
const formNames = [
  "مرهم مضاد للفطريات",
  "كريم مرطب علاجي",
  "محلول معقم",
  "غسول فموي مطهر",
  "قطرات عينية مرطبة",
  "بخاخ أنفي ملحي",
  "شامبو طبي",
  "صابون مطهر",
  "مرهم للحروق",
  "كريم واقي من الشمس",
  "جل مخدر موضعي",
  "محلول مطهر للجروح",
  "كريم مضاد للالتهاب",
  "مرهم مضاد حيوي",
  "لوشن مرطب",
  "كريم تفتيح",
  "سيروم فيتامين سي",
  "ماسك الطين",
  "تونر منظف",
  "كريم ليلي مجدد",
]

const activeIngredients = [
  "كلوتريمازول 1%",
  "حمض الساليسيليك 2%",
  "بيروكسيد البنزويل 5%",
  "تريتينوين 0.025%",
  "هيدروكورتيزون 1%",
  "كيتوكونازول 2%",
  "ميكونازول نترات 2%",
  "نيومايسين سلفات",
  "باسيتراسين زنك",
  "ليدوكايين 2%",
  "بنزوكايين 20%",
  "كلورهيكسيدين 0.12%",
  "بوفيدون أيودين 10%",
  "سلفاديازين الفضة 1%",
  "موبيروسين 2%",
]

const forms = ["كريم", "مرهم", "جل", "محلول", "لوشن", "بخاخ", "مسحوق", "رغوة"]

const instructions = [
  "يوضع طبقة رقيقة على المنطقة المصابة مرتين يومياً",
  "يستخدم بعد تنظيف المنطقة وتجفيفها جيداً",
  "تجنب ملامسة العينين والأغشية المخاطية",
  "للاستخدام الخارجي فقط",
  "يحفظ بعيداً عن متناول الأطفال",
  "يستخدم لمدة أسبوعين كحد أقصى ما لم ينصح الطبيب بخلاف ذلك",
  "يرج جيداً قبل الاستخدام",
  "يستخدم على بشرة نظيفة وجافة",
]

const shelfLives = ["6 أشهر", "12 شهر", "18 شهر", "24 شهر", "36 شهر"]

const preparationMethods = [
  // تحضير الكريمات والمراهم
  `1. تُوزن المواد الدهنية (الفازلين، شمع العسل، زيت اللوز) في وعاء مقاوم للحرارة.
2. تُسخن على حمام مائي حتى الذوبان الكامل عند 70°م.
3. في وعاء منفصل، يُذاب المكون الفعال في الماء المقطر.
4. يُضاف المحلول المائي للمرحلة الدهنية مع التقليب المستمر.
5. يُستمر في التقليب حتى التبريد والحصول على قوام متجانس.
6. يُعبأ في عبوات معقمة ويُحفظ في مكان بارد.`,

  // تحضير المحاليل
  `1. يُحضر الماء المقطر المعقم ويُسخن إلى 60°م.
2. يُضاف المكون الفعال تدريجياً مع التحريك المستمر.
3. تُضاف المواد الحافظة (ميثيل بارابين 0.1%).
4. يُضبط الـ pH إلى المستوى المطلوب باستخدام محلول منظم.
5. يُرشح المحلول باستخدام فلتر 0.22 ميكرون.
6. يُعبأ في زجاجات معقمة تحت ظروف معقمة.`,

  // تحضير الجل
  `1. يُنقع البوليمر (كاربوبول) في الماء المقطر لمدة 24 ساعة.
2. يُذاب المكون الفعال في كمية قليلة من الكحول أو البروبيلين جلايكول.
3. يُضاف المحلول للبوليمر المنتفخ مع التقليب البطيء.
4. يُضاف محلول هيدروكسيد الصوديوم لتعديل الـ pH وتكوين الجل.
5. تُضاف المواد الحافظة والمعطرات.
6. يُعبأ في أنابيب أو عبوات مناسبة.`,

  // تحضير المعلقات
  `1. يُطحن المكون الفعال إلى مسحوق ناعم جداً (أقل من 50 ميكرون).
2. يُحضر محلول المثبت (ميثيل سليلوز 1%) في الماء الساخن.
3. يُضاف المسحوق الدوائي للمحلول مع الخلط بالموجات فوق الصوتية.
4. تُضاف المواد الحافظة والمحليات والنكهات.
5. يُضبط الحجم النهائي ويُعبأ في زجاجات.
6. يُكتب على العبوة "يُرج جيداً قبل الاستعمال".`,

  // تحضير القطرات
  `1. يُحضر محلول فوسفات منظم معقم (pH 7.4).
2. يُذاب المكون الفعال في المحلول المنظم.
3. تُضاف المواد الحافظة (بنزالكونيوم كلوريد 0.01%).
4. يُضاف كلوريد الصوديوم لضبط التوتر الأسموزي.
5. يُرشح المحلول بفلتر 0.22 ميكرون تحت ظروف معقمة.
6. يُعبأ في قطارات بلاستيكية معقمة.`,

  // تحضير البخاخات
  `1. يُذاب المكون الفعال في مذيب مناسب (إيثانول أو ماء).
2. تُضاف المواد المساعدة (جلسرين للترطيب).
3. يُضاف عامل الدفع المناسب للرش.
4. يُخلط المحلول جيداً ويُرشح.
5. يُعبأ في عبوات بخاخ معقمة.
6. يُختبر حجم الجرعة وتوزيع الرذاذ.`,

  // تحضير الشامبو الطبي
  `1. يُسخن الماء المقطر إلى 70°م.
2. يُضاف المنظف الأساسي (صوديوم لوريل سلفات) مع التحريك.
3. يُذاب المكون الفعال (كيتوكونازول) منفصلاً ويُضاف.
4. تُضاف المكثفات والمرطبات ومعدلات اللزوجة.
5. يُضبط الـ pH إلى 5.5-6.5.
6. تُضاف العطور والملونات ويُعبأ في عبوات.`,

  // تحضير الصابون الطبي
  `1. تُذاب القاعدة الصابونية (جلسرين) على حمام مائي.
2. يُذاب المكون الفعال في كمية قليلة من الجلسرين.
3. يُضاف للقاعدة المنصهرة مع التحريك اللطيف.
4. تُضاف الملونات والعطور المناسبة.
5. يُصب في قوالب ويُترك ليبرد ويتصلب.
6. يُغلف بعد التصلب الكامل.`,
]

function getRandomElement<T>(arr: T[]): T {
  return arr[Math.floor(Math.random() * arr.length)]
}

function generateRandomPrice(): number {
  return Math.round((Math.random() * 500 + 5) * 100) / 100
}

function generateStrength(): string {
  const units = ["mg", "mcg", "g", "ml", "IU", "%"]
  const values = [5, 10, 20, 25, 50, 100, 250, 500, 1000]
  return `${getRandomElement(values)} ${getRandomElement(units)}`
}

export function generatePharmData(productCount: number, formulationCount: number): PharmDataset {
  const products: Product[] = []
  const formulations: Formulation[] = []

  for (let i = 1; i <= productCount; i++) {
    products.push({
      id: i,
      trade_name: `${getRandomElement(tradeNames)} ${Math.floor(Math.random() * 100)}`,
      scientific_name: getRandomElement(scientificNames),
      manufacturer: getRandomElement(manufacturers),
      dosage_form: getRandomElement(dosageForms),
      strength: generateStrength(),
      price: generateRandomPrice(),
      category: getRandomElement(categories),
    })
  }

  for (let i = 1; i <= formulationCount; i++) {
    formulations.push({
      id: i,
      name: `${getRandomElement(formNames)} ${Math.floor(Math.random() * 100)}`,
      active_ingredients: getRandomElement(activeIngredients),
      form: getRandomElement(forms),
      instructions: getRandomElement(instructions),
      shelf_life: getRandomElement(shelfLives),
      preparation_method: getRandomElement(preparationMethods),
    })
  }

  return { products, formulations }
}
